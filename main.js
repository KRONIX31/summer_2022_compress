const descriptions=document.querySelectorAll(".description"),buttons=document.querySelectorAll(".play"),regulatorVolume=document.querySelector(".volume"),allAudio=document.querySelectorAll("audio"),currentTime=document.querySelectorAll(".current_time"),durationTime=document.querySelectorAll(".duration_time"),allTimelines=document.querySelectorAll(".timeline");let targetElem,targetAudio,targetLi;regulatorVolume.oninput=volumeChange;function volumeChange(){for(i=0;i<allAudio.length;i++)allAudio[i].volume=regulatorVolume.value/100;localStorage.volume=regulatorVolume.value}for(document.addEventListener("DOMContentLoaded",()=>{regulatorVolume.value=localStorage.volume,volumeChange()}),i=0;i<buttons.length;i++)buttons[i].addEventListener("click",buttonClick),descriptions[i].addEventListener("click",descriptionClick),allAudio[i].addEventListener("loadedmetadata",setMeta),allAudio[i].addEventListener("timeupdate",timeUpdate),allAudio[i].addEventListener("ended",audioEnded),allTimelines[i].oninput=touchTimeUpdate;function setMeta(){for(i=0;i<allAudio.length;i++){let a=parseInt(`${allAudio[i].duration/60%60}`,10),b=`${parseInt(`${allAudio[i].duration%60}`,10)}`.padStart(2,"0");durationTime[i].innerHTML=`${a}:${b}`,currentTime[i].innerHTML=allAudio[i].currentTime}}function timeUpdate(a){const b=a.target.parentNode.querySelector(".timeline"),c=a.target.parentNode.querySelector(".current_time"),d=a.target;b.value=100*(a.srcElement.currentTime/a.srcElement.duration),mins=`${Math.floor(d.currentTime/60)}`,secs=Math.floor(d.currentTime%60),10>secs&&(secs=`0`+(secs+"")),c.innerHTML=`${mins}:${secs}`}function touchTimeUpdate(a){function b(){const b=c.duration*(+a.target.value/100);c.currentTime=b,mins=`${Math.floor(b/60)}`,secs=Math.floor(b%60),10>secs&&(secs=`0`+(secs+"")),d.innerHTML=`${mins}:${secs}`}const c=a.target.parentNode.parentNode.querySelector("audio"),d=a.target.parentNode.parentNode.querySelector(".current_time");a.target.parentNode.parentNode.querySelector("audio").paused?b():(c.pause(),b(),c.play())}function audioEnded(a){const b=a.target.parentNode,c=a.target.parentNode.querySelector(".timeline_wrap"),d=a.target.parentNode.querySelector("img");b.classList.remove("list_item_active"),c.style.display="none",d.setAttribute("src","play.svg"),d.style.transform="scale(1)",a.target.currentTime=0;const e=document.querySelectorAll(".list_item");for(i=0;i<e.length;i++)a.target.parentNode==e[i]&&(e.length>i+1?(buttonClick(e[i+1].querySelector("img")),console.log(1)):(buttonClick(e[0].querySelector("img")),console.log("22")))}function buttonClick(a){function b(){targetAudio=targetElem.parentNode.parentNode.querySelector(".audio")}targetElem=a.target?a.target:a,targetElem.src?b():(targetElem=targetElem.querySelector("img"),b()),descriptionClick(targetElem,!0)}function descriptionClick(a,b){b?(targetLi=a.parentNode.parentNode,play()):"DIV"==a.target.tagName?(targetLi=a.target.parentNode,play()):(targetLi=a.target.parentNode.parentNode,play())}function play(){function a(){targetAudio.paused?(targetAudio.play(),targetLi.classList.add("list_item_active"),c.setAttribute("src","pause.svg"),c.style.transform="scale(1.3)",d.style.display="block",allAudio.forEach(function(a){a==targetAudio||(a.pause(),a.currentTime=0,a.parentNode.classList.remove("list_item_active"),a.parentNode.querySelector(".timeline_wrap").style.display="none",c=a.parentNode.querySelector("img"),c.setAttribute("src","play.svg"),c.style.transform="scale(1)")})):(targetAudio.pause(),c.setAttribute("src","play.svg"),c.style.transform="scale(1)")}function b(){targetAudio.paused?(targetAudio.play(),c.setAttribute("src","pause.svg"),c.style.transform="scale(1.3)"):(targetAudio.pause(),c.setAttribute("src","play.svg"),c.style.transform="scale(1)")}"0:00"==durationTime[0].innerHTML&&setMeta(),targetAudio=targetLi.querySelector("audio");let c=targetLi.querySelector("img"),d=targetLi.querySelector(".timeline_wrap");0==targetAudio.currentTime?a():b()}